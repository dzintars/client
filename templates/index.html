{{ template "header" . }}
<os-viewport>
    <os-taskbar slot="os-taskbar">
        <button slot="launcher-area" open-launcher>
            <svg class="i-icon">
                <use xlink:href="/static/img/svg-icons/icons.svg#i-9dots"></use>
            </svg>
        </button>
        {{ template "inc-authentication-form" . }}
        <h1 slot="main-area">{{ .Application.Name }}</h1>
    </os-taskbar>
    <os-workspace slot="os-workspace">
        <div slot="ws-toolbar" class="toolbar">
            <button class="success">Save</button>
            <button class="success" onclick="fadeIn('order-create-form')">New</button>
            <button class="primary">Import</button>
            <button class="danger">Delete</button>
            <button class="primary">Geo-Code</button>
            <button class="primary">Remove Geo Metadata</button>
            <button class="primary">Add Route</button>
            <button class="primary">Export</button>
        </div>
        <div slot="ws-main-panel" id="order-create-form" class="order-create-form">
            <div class="header"><p>Add new delivery order</p></div>
            <div class="body">
                <form id="delivery-order-form" action="/" method="POST" class="delivery-order-new" name="delivery-order-new">
                    <div>
                        <label for="sequence">Sequence</label>
                        <input class="lg" id="sequence" name="sequence" type="number" placeholder="0" autofocus/>
                        <label for="reference">Reference</label>
                        <input class="lg" id="reference" name="reference" type="text" placeholder="REF24872"/>
                        <label for="weight">Weight</label>
                        <input class="lg" id="weight" name="weight" type="number" step="0.01" placeholder="0.0"/>
                    </div>
                    <div>
                        <label for="address">Delivery Address</label>
                        <input class="lg" id="address" name="address" type="text" placeholder="Delivery Address"/>
                        <label for="zip">Delivery Zip</label>
                        <input class="lg" id="zip" name="zip" type="text" placeholder="Zip"/>
                    </div>
                    <div>
                        <label for="lat">Lattitude</label>
                        <input class="lg" id="lat" name="lat" type="number" placeholder="Lat"/>
                        <label for="lng">Longtitude</label>
                        <input class="lg" id="lng" name="lng" type="number" placeholder="Lng"/>
                    </div>
                </form>
            </div>
            <div class="footer">
                <button onclick="fadeOut('order-create-form')" class="md intense warning">Close</button>
                <button type="submit" form="delivery-order-form" action="#" class="md intense success">Add Order</button>
            </div>
        </div>
        <table slot="ws-main-panel">
            <colgroup>
                <col style="width: 40px;">
                <col style="width: 40px;">
                <col style="width: 120px;">
                <col style="width: auto;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 60px;">
            </colgroup>
            <thead>
                <tr>
                    <th>Sequence</th>
                    <th>ID</th>
                    <th>Reference</th>
                    <th>Delivery Address</th>
                    <th>Zip</th>
                    <th>Lat</th>
                    <th>Lng</th>
                    <th>Weight</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {{ range .DeliveryOrders }}
                <tr draggable="true">
                    <td><span>{{ .RoutingSequence }}</span></td>
                    <td ondblclick="fadeIn('order-profile')"><a href="/{{ .Id }}" >{{ .Id }}</a></td>
                    <td ondblclick="fadeIn('order-profile')">{{ .Reference }}</td>
                    <td ondblclick="fadeIn('order-profile')">{{ .DestinationAddress }}</td>
                    <td ondblclick="fadeIn('order-profile')">{{ .DestinationZip }}</td>
                    <td ondblclick="fadeIn('order-profile')">{{ .DestinationLat }}</td>
                    <td ondblclick="fadeIn('order-profile')">{{ .DestinationLng }}</td>
                    <td ondblclick="fadeIn('order-profile')">{{ .TotalWeight}}</td>
                    <td class="actions">
                        <form action="/delete" method="POST">
                            <input type="hidden" value="{{ .Id }}" name="id">
                            <input type="submit" value="Delete" class="sm intense danger">
                        </form>
                    </td>
                </tr>
                {{ end }}
            </tbody>
        </table>
        <div slot="ws-right-panel" id="order-profile" class="order-profile">
            <div class="header"><p>Order profile data will be show there</p></div>
            <div class="body"><h1>Profile Body</h1></div>
            <div class="footer">
                <button onclick="fadeOut('order-profile')" class="md intense warning">Close</button>
                <button class="md intense success">Save</button>
            </div>
        </div>
        <div slot="ws-right-panel" id="mapid" style="height: 100%; width: 100%;"></div>
        <p slot="ws-statusbar">gRPC backed example App (in development)</p>
    </os-workspace>

</os-viewport>

<script>
    var markers = [
        {{ range .DeliveryOrders }}
        [{{ .DestinationAddress }}, {{ .RoutingSequence }}, {{ .DestinationLat }}, {{ .DestinationLng }}],
        {{ end }}
    ];
</script>

{{ template "footer"}}