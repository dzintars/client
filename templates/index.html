{{ template "header" . }}
<os-viewport>
    <os-taskbar slot="os-taskbar">
        <button slot="launcher-area" open-launcher>
            <svg class="i-icon">
                <use xlink:href="/static/img/svg-icons/icons.svg#i-9dots"></use>
            </svg>
        </button>
        {{ template "inc-authentication-form" . }}
        <h1 slot="main-area">{{ .Application.Name }}</h1>
    </os-taskbar>
    <os-workspace slot="os-workspace">
        <div slot="ws-toolbar" class="toolbar">
            <button class="success">Save</button>
            <button class="success" onclick="fadeIn('order-create-form')">New</button>
            <button class="primary">Import</button>
            <button class="danger">Delete</button>
            <button class="primary">Geo-Code</button>
            <button class="primary">Remove Geo Metadata</button>
            <button class="primary">Add Route</button>
            <button class="primary">Export</button>
        </div>
        <div slot="ws-main-panel" id="order-create-form" class="order-create-form">
            <div class="header"><p>Add new delivery order</p></div>
            <div class="body">
                <form id="delivery-order-form" action="/" method="POST">
                    <div>
                        <input type="text" placeholder="Sequence" name="sequence" autofocus>
                        <input type="text" placeholder="Reference" name="reference">
                        <input type="text" placeholder="Weight" name="weight">
                    </div>
                    <div>
                        <input type="text" placeholder="Address" name="address">
                        <input type="text" placeholder="Zip" name="zip">
                    </div>
                    <div>
                        <input type="text" placeholder="Lat" name="lat">
                        <input type="text" placeholder="Lng" name="lng">
                    </div>
                </form>
            </div>
            <div class="footer">
                <button onclick="fadeOut('order-create-form')" class="md warning">Close</button>
                <button type="submit" form="delivery-order-form" action="#" class="md success">Add Order</button>
            </div>

        </div>
        <table slot="ws-main-panel">
            <colgroup>
                <col style="width: 40px;">
                <col style="width: 40px;">
                <col style="width: 120px;">
                <col style="width: auto;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
            </colgroup>
            <thead>
                <tr>
                    <th>Sequence</th>
                    <th>ID</th>
                    <th>Reference</th>
                    <th>Delivery Address</th>
                    <th>ZIP</th>
                    <th>Lat</th>
                    <th>Lng</th>
                    <th>Weight</th>
                </tr>
            </thead>
            <tbody>
                {{ range .DeliveryOrders }}
                <tr draggable="true">
                    <td><span>{{ .RoutingSequence }}</span></td>
                    <td><a href="/{{ .Id }}">{{ .Id }}</a></td>
                    <td>{{ .Reference }}</td>
                    <td>{{ .DestinationAddress }}</td>
                    <td>{{ .DestinationZip }}</td>
                    <td>{{ .DestinationLat }}</td>
                    <td>{{ .DestinationLng }}</td>
                    <td>{{ .TotalWeight}}</td>
                </tr>
                {{ end }}
            </tbody>
        </table>
        <div slot="ws-right-panel" id="mapid" style="height: 100%; width: 100%;"></div>
        <p slot="ws-statusbar">gRPC backed example App (in development)</p>
    </os-workspace>

</os-viewport>

<script>
    var markers = [
        {{ range .DeliveryOrders }}
        [{{ .DestinationAddress }}, {{ .RoutingSequence }}, {{ .DestinationLat }}, {{ .DestinationLng }}],
        {{ end }}
    ];
</script>

{{ template "footer"}}